function dependOn(){"use strict";return[require("communicate"),require("common"),require("util"),require("proxy"),require("analytics"),require("acro-web2pdf")]}var def;require=function(e){"use strict";return e},def=window.define?window.define:function(e,n){"use strict";return n.apply(null,[{ajax:$.ajax.bind($)}])};var exports=acom_analytics={};def(dependOn(),function(t,e,i,n,r,s){"use strict";var o,a=null;for(o in a=a||new function(){this.proxy=n.proxy.bind(this),this.LOG=e.LOG,this.getVersion=function(n){function e(e){e&&(clearTimeout(o),e.optinState&&"false"===e.optinState?SETTINGS.ANALYTICS_OPT_IN=!1:1==+e.majorVersion?(r.event(r.e.SHIM_VERSION,{VERSION:"Unknown"}),r.shim="unknown"):0==+e.majorVersion?(r.event(r.e.SHIM_VERSION,{VERSION:"None"}),r.shim="none"):(r.event(r.e.SHIM_VERSION,{VERSION:e.majorVersion+"."+e.minorVersion}),r.shim=e.majorVersion+"."+e.minorVersion),t.setVersion(+e.majorVersion),n(+e.majorVersion))}var o;o=setTimeout(function(){e({messageType:"shimVersionInfo",majorVersion:"1",minorVersion:"0"})},2e3),s.getVersion(e)},this.openInAcrobat=function(r){var n=this;chrome.tabs.get(r.tabId,function(e){if(e.url&&(r.url=e.url),void 0===r.filename&&(r.filename=t.filenameFromUrl(r.url)),1<t.version){r.panel_op="status",r.current_status="pdf_downloading",t.sendMessage(r);var o=i.newXHR();o.open("GET",r.url,!0),o.responseType="blob",o.onload=n.proxy(function(e){var n;o.status<400?((n=new FileReader).onloadend=function(e){r.base64PDF=e.target.result,s.openInAcrobat(r),r.content_op="status",r.current_status="pdf_downloaded",t.sendMessage(r)},n.readAsDataURL(o.response)):(r.panel_op="status",r.current_status="pdf_failure",t.sendMessage(r))}),o.send()}else chrome.downloads.download({url:r.url,conflictAction:"uniquify"})})},this.open_converted_file=function(e){s.openFile(e)}})a.hasOwnProperty(o)&&("function"==typeof a[o]?exports[o]=a[o].bind(a):exports[o]=a[o]);return t.registerHandlers({open_in_acrobat:a.proxy(a.openInAcrobat),open_converted_file:a.proxy(a.open_converted_file)}),a});